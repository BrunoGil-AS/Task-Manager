<article
  class="task-card"
  [class.task-card--completed]="isCompleted()"
  [class.task-card--skeleton]="loading()"
>
  @if (loading()) {
    <div class="task-card-header">
      <div class="skeleton-pill"></div>
      <div class="skeleton-line skeleton-line--sm"></div>
    </div>
    <div class="skeleton-line skeleton-line--title"></div>
    <div class="skeleton-line"></div>
    <div class="skeleton-line skeleton-line--short"></div>
    <div class="task-card-footer">
      <div class="skeleton-button"></div>
    </div>
  } @else {
    <!-- Card Header -->
    <div class="task-card-header">
      <div class="task-card-status">
        <div class="status-badge" [class.status-badge--completed]="isCompleted()">
          <span class="status-icon">{{ isCompleted() ? 'OK' : '...' }}</span>
          <span class="status-text">{{ isCompleted() ? 'Completada' : 'En progreso' }}</span>
        </div>
      </div>
      <div class="task-card-date">
        <time class="task-date">{{ taskDate() | date: 'short' }}</time>
      </div>
    </div>

    <!-- Card Title -->
    <h3 class="task-card-title">{{ taskTitle() }}</h3>

    <!-- Card Description -->
    <p class="task-card-description">{{ taskDescription() }}</p>

    <!-- Card Footer -->
    <div class="task-card-footer">
      <button class="btn btn-primary btn-sm" (click)="goToDetails()">Detalles</button>
      <button class="btn btn-primary btn-sm" (click)="delete(task()?.id!)">Borrar</button>
    </div>
  }
</article>
